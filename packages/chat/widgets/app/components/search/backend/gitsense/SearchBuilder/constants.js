/*
 * GitSense Chat - Minified Distribution File
 *
 * This JavaScript file is part of the minified distribution of GitSense Chat.
 * It has been optimized (minified) for performance and efficient delivery.
 *
 * This software is permitted for internal use and modification.
 * Copying for profit or redistribution is strictly not permitted.
 *
 * The Fair License, which formalizes these terms, will be adopted as the official license in the future.
 * Once finalized, the unminified source code will be freely available for internal use for non-
 * commercial purposes.
 *
 * This software may not be used to develop or enhance any product or service that competes
 * directly or indirectly with GitSense Chat without explicit permission.
 *
 * Copyright (c) 2025 GitSense. All rights reserved.
 */

let HIGHLIGHT_MARKER_START="<GSC>",HIGHLIGHT_MARKER_END="</GSC>",TARGET_TABLE_MAP={messages:"messages",chats:"chats","code-blocks":"code_blocks"},COLUMN_USAGE={ESSENTIAL_JOIN:{messages:["id","chat_id"],chats:["id","parent_id"],code_blocks:["uuid","message_id"]},ESSENTIAL_FILTER:{messages:["deleted","visibility","type"],chats:["deleted","visibility","type"],code_blocks:[]},ESSENTIAL_SORT:{messages:["updated_at","created_at","modified_at"],chats:["updated_at","created_at","modified_at","order_weight"],code_blocks:["created_at"]},COMMON_OUTPUT:{messages:["message","role","model","type"],chats:["name","uuid","type","owner"],code_blocks:["content","component","uuid"]},METADATA_FIELDS:{file_path:{table:"messages",jsonPath:"$.extracted_metadata.file_path",type:"string"},git_repo:{table:"messages",jsonPath:"$.extracted_metadata.git_repo",type:"string"}}},QUERY_REQUIREMENTS={FTS_SEARCH:{messages:{tables:["messages","fts_messages"],columns:["messages.id","messages.message","fts_messages.rank"]},chats:{tables:["chats","fts_chats"],columns:["chats.id","chats.name","fts_chats.rank"]},code_blocks:{tables:["code_blocks","fts_code_blocks"],columns:["code_blocks.uuid","code_blocks.content","fts_code_blocks.rank"]}},SCOPE_FILTER:{required_columns:["chats.id","chats.parent_id","messages.chat_id"],required_joins:["messages","chats"]}},FIELD_TABLE_MAP={"messages.id":{source:"table",table:"messages",type:"integer",cteName:"messages_id",outputtable:!0},"messages.type":{source:"table",table:"messages",type:"string",cteName:"messages_type",searchable:!0,outputtable:!0},"messages.deleted":{source:"table",table:"messages",type:"integer",cteName:"messages_deleted",searchable:!0,outputtable:!0},"messages.visibility":{source:"table",table:"messages",type:"string",cteName:"messages_visibility",searchable:!0,outputtable:!0},"messages.chat_id":{source:"table",table:"messages",type:"integer",cteName:"messages_chat_id",searchable:!0,sortable:!0,outputtable:!0},"messages.parent_id":{source:"table",table:"messages",type:"integer",cteName:"messages_parent_id",searchable:!0,outputtable:!0},"messages.level":{source:"table",table:"messages",type:"integer",cteName:"messages_level",searchable:!0,sortable:!0,outputtable:!0},"messages.sample":{source:"table",table:"messages",type:"integer",cteName:"messages_sample",searchable:!0,outputtable:!0},"messages.model":{source:"table",table:"messages",type:"string",cteName:"messages_model",searchable:!0,outputtable:!0},"messages.real_model":{source:"table",table:"messages",type:"string",cteName:"messages_real_model",searchable:!0,outputtable:!0},"messages.message.snippet":{source:"table",table:"messages",type:"string",cteName:"messages_content_snippet",outputtable:!0,searchable:!1,sortable:!1},"messages.role":{source:"table",table:"messages",type:"string",cteName:"messages_role",searchable:!0,outputtable:!0},"messages.message":{source:"table",table:"messages",type:"string",cteName:"messages_content",outputtable:!0},"messages.pinned":{source:"table",table:"messages",type:"integer",cteName:"messages_pinned",searchable:!0,outputtable:!0},"messages.chat_completion_stats":{source:"table",table:"messages",type:"json",cteName:"messages_chat_completion_completion_stats",outputtable:!0,searchable:!1,sortable:!1},"messages.meta":{source:"table",table:"messages",type:"json",cteName:"messages_meta",outputtable:!0,searchable:!1,sortable:!1},"messages.blob_id":{source:"table",table:"messages",type:"integer",cteName:"messages_blob_id",outputtable:!0},"messages.priority":{source:"table",table:"messages",type:"integer",cteName:"messages_priority",searchable:!0,sortable:!0,outputtable:!0},"messages.job_id":{source:"table",table:"messages",type:"integer",cteName:"messages_job_id",searchable:!0,outputtable:!0},"messages.job_attempts":{source:"table",table:"messages",type:"integer",cteName:"messages_job_attempts",outputtable:!0},"messages.job_exception":{source:"table",table:"messages",type:"string",cteName:"messages_job_exception",outputtable:!0},"messages.created_at":{source:"table",table:"messages",type:"datetime",cteName:"messages_created_at",searchable:!0,sortable:!0,outputtable:!0},"messages.updated_at":{source:"table",table:"messages",type:"datetime",cteName:"messages_updated_at",searchable:!0,sortable:!0,outputtable:!0},"messages.modified_at":{source:"table",table:"messages",type:"datetime",cteName:"messages_modified_at",searchable:!0,sortable:!0,outputtable:!0},"chats.id":{source:"table",table:"chats",type:"integer",cteName:"chats_id",outputtable:!0},"chats.type":{source:"table",table:"chats",type:"string",cteName:"chats_type",searchable:!0,outputtable:!0},"chats.deleted":{source:"table",table:"chats",type:"integer",cteName:"chats_deleted",searchable:!0,outputtable:!0},"chats.visibility":{source:"table",table:"chats",type:"string",cteName:"chats_visibility",searchable:!0,outputtable:!0},"chats.uuid":{source:"table",table:"chats",type:"string",cteName:"chats_uuid",outputtable:!0},"chats.owner":{source:"table",table:"chats",type:"string",cteName:"chats_owner",searchable:!0,outputtable:!0},"chats.name":{source:"table",table:"chats",type:"string",cteName:"chats_name",searchable:!0,outputtable:!0},"chats.parent_id":{source:"table",table:"chats",type:"integer",cteName:"chats_parent_id",searchable:!0,outputtable:!0},"chats.group_id":{source:"table",table:"chats",type:"integer",cteName:"chats_group_id",searchable:!0,outputtable:!0},"chats.prompt_id":{source:"table",table:"chats",type:"integer",cteName:"chats_prompt_id",searchable:!0,outputtable:!0},"chats.main_model":{source:"table",table:"chats",type:"string",cteName:"chats_main_model",searchable:!0,outputtable:!0},"chats.pinned":{source:"table",table:"chats",type:"integer",cteName:"chats_pinned",searchable:!0,outputtable:!0},"chats.protected":{source:"table",table:"chats",type:"integer",cteName:"chats_protected",searchable:!0,outputtable:!0},"chats.order_weight":{source:"table",table:"chats",type:"integer",cteName:"chats_order_weight",sortable:!0,outputtable:!0},"chats.forked_from_msg_id":{source:"table",table:"chats",type:"integer",cteName:"chats_forked_from_msg_id",outputtable:!0},"chats.meta":{source:"table",table:"chats",type:"json",cteName:"chats_meta",outputtable:!0,searchable:!1,sortable:!1},"chats.is_default_name":{source:"table",table:"chats",type:"integer",cteName:"chats_is_default_name",searchable:!0,outputtable:!0},"chats.created_at":{source:"table",table:"chats",type:"datetime",cteName:"chats_created_at",searchable:!0,sortable:!0,outputtable:!0},"chats.updated_at":{source:"table",table:"chats",type:"datetime",cteName:"chats_updated_at",searchable:!0,sortable:!0,outputtable:!0},"chats.modified_at":{source:"table",table:"chats",type:"datetime",cteName:"chats_modified_at",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.id":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_id",outputtable:!0},"code_blocks.message_id":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_message_id",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.type":{source:"table",table:"code_blocks",type:"string",cteName:"code_blocks_type",searchable:!0,outputtable:!0},"code_blocks.size":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_size",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.header":{source:"table",table:"code_blocks",type:"json",cteName:"code_blocks_header",outputtable:!0,searchable:!1,sortable:!1},"code_blocks.content":{source:"table",table:"code_blocks",type:"string",cteName:"code_blocks_content",outputtable:!0},"code_blocks.uuid":{source:"table",table:"code_blocks",type:"string",cteName:"code_blocks_uuid",outputtable:!0},"code_blocks.parent_uuid":{source:"table",table:"code_blocks",type:"string",cteName:"code_blocks_parent_uuid",searchable:!0,outputtable:!0},"code_blocks.component":{source:"table",table:"code_blocks",type:"string",cteName:"code_blocks_component",searchable:!0,outputtable:!0},"code_blocks.major":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_major_version",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.minor":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_minor_version",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.patch":{source:"table",table:"code_blocks",type:"integer",cteName:"code_blocks_patch_version",searchable:!0,sortable:!0,outputtable:!0},"code_blocks.created_at":{source:"table",table:"code_blocks",type:"datetime",cteName:"code_blocks_created_at",searchable:!0,sortable:!0,outputtable:!0},"groups.id":{source:"table",table:"groups",type:"integer",cteName:"groups_id",outputtable:!0},"groups.type":{source:"table",table:"groups",type:"string",cteName:"groups_type",outputtable:!0},"groups.name":{source:"table",table:"groups",type:"string",cteName:"groups_name",outputtable:!0},"groups.meta":{source:"table",table:"groups",type:"json",cteName:"groups_meta",outputtable:!0,searchable:!1,sortable:!1},"messages.meta.file_name":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.file_name",cteName:"messages_meta_file_name",searchable:!0,outputtable:!0},"messages.meta.file_extension":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.file_extension",cteName:"messages_meta_file_extension",searchable:!0,outputtable:!0},"messages.meta.git_repo":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.git_repo",cteName:"messages_meta_git_repo",searchable:!0,outputtable:!0},"messages.meta.published_date":{source:"table",table:"messages",type:"datetime",jsonPath:"$.extracted_metadata.published_date",cteName:"messages_meta_published_date",searchable:!0,sortable:!0,outputtable:!0,sqlType:"DATETIME"},"messages.meta.release_version":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.release_version",cteName:"messages_meta_release_version",searchable:!0,outputtable:!0},"messages.meta.title":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.title",cteName:"messages_meta_title",searchable:!0,outputtable:!0},"messages.meta.document_type":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.document_type",cteName:"messages_meta_document_type",searchable:!0,outputtable:!0},"messages.meta.language":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.language",cteName:"messages_meta_language",searchable:!0,outputtable:!0},"messages.meta.issue_number":{source:"table",table:"messages",type:"integer",jsonPath:"$.extracted_metadata.issue_number",cteName:"messages_meta_issue_number",searchable:!0,sortable:!0,outputtable:!0},"messages.meta.state":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.state",cteName:"messages_meta_state",searchable:!0,outputtable:!0},"messages.meta.author":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.author",cteName:"messages_meta_author",searchable:!0,outputtable:!0},"messages.meta.assignees":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.assignees",cteName:"messages_meta_assignees",searchable:!0,outputtable:!0},"messages.meta.labels":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.labels",cteName:"messages_meta_labels",searchable:!0,outputtable:!0,sqlType:"TEXT"},"messages.meta.searchable":{source:"table",table:"messages",type:"integer",jsonPath:"$.searchable",cteName:"messages_meta_searchable",searchable:!0,outputtable:!1,sortable:!1,sqlType:"INTEGER"},"messages.meta.purpose":{source:"table",table:"messages",type:"string",jsonPath:"$.extracted_metadata.purpose",cteName:"messages_meta_purpose",searchable:!1,sortable:!1,outputtable:!0},"chats.meta.git_path":{source:"table",table:"chats",type:"string",jsonPath:"$.path",cteName:"chats_meta_git_path",searchable:!0,outputtable:!0},"chats.meta.language":{source:"table",table:"chats",type:"string",jsonPath:"$.language",cteName:"chats_meta_language",searchable:!0,outputtable:!0},"chats.meta.commit.timestamp":{source:"table",table:"chats",type:"datetime",jsonPath:"$.commit.timestamp",cteName:"chats_meta_commit_timestamp",searchable:!0,sortable:!0,outputtable:!0,sqlType:"REAL"},created_at:{source:"table",table:"messages",type:"datetime",cteName:"messages_created_at",searchable:!0,sortable:!0,outputtable:!0},updated_at:{source:"table",table:"messages",type:"datetime",cteName:"messages_updated_at",searchable:!0,sortable:!0,outputtable:!0},modified_at:{source:"table",table:"messages",type:"datetime",cteName:"messages_modified_at",searchable:!0,sortable:!0,outputtable:!0},result_chat_id:{source:"table",table:null,type:"integer",cteName:"result_chat_id",outputtable:!0,searchable:!1,sortable:!1},fts_rank:{source:"table",table:null,type:"numeric",cteName:"fts_rank",searchable:!1,sortable:!0,outputtable:!0},source_type:{source:"table",table:null,type:"string",cteName:"source_type",outputtable:!0,searchable:!1,sortable:!1},"cte.all_matches_counts.total_chat_matches":{source:"cte",table:"all_matches_counts",type:"integer",cteName:"cte_all_matches_counts_total_chat_matches",outputtable:!0,searchable:!1,sortable:!1},"cte.all_matches_counts.total_message_matches":{source:"cte",table:"all_matches_counts",type:"integer",cteName:"cte_all_matches_counts_total_message_matches",outputtable:!0,searchable:!1,sortable:!1},"cte.all_matches_counts.total_code_block_matches":{source:"cte",table:"all_matches_counts",type:"integer",cteName:"cte_all_matches_counts_total_code_block_matches",outputtable:!0,searchable:!1,sortable:!1},"cte.cte_chat_message_stats.num_messages":{source:"cte",table:"cte_chat_message_stats",type:"integer",cteName:"",outputtable:!0,searchable:!1,sortable:!0},"cte.cte_chat_message_stats.last_updated_at":{source:"cte",table:"cte_chat_message_stats",type:"datetime",cteName:"",outputtable:!0,searchable:!0,sortable:!0},"cte.chat_path.path":{source:"cte",table:"chat_path",type:"string",cteName:"",outputtable:!0,searchable:!1,sortable:!1},"chat-id":{source:"filter",table:null,type:"array of integers",searchable:!0,sortable:!1,outputtable:!1}},FTS_FIELD_WEIGHTS={"chats.name":1,"messages.message":5,"code_blocks.content":5};module.exports={TARGET_TABLE_MAP:TARGET_TABLE_MAP,FIELD_TABLE_MAP:FIELD_TABLE_MAP,FTS_FIELD_WEIGHTS:FTS_FIELD_WEIGHTS,COLUMN_USAGE:COLUMN_USAGE,QUERY_REQUIREMENTS:QUERY_REQUIREMENTS,HIGHLIGHT_MARKER_START:HIGHLIGHT_MARKER_START,HIGHLIGHT_MARKER_END:HIGHLIGHT_MARKER_END};
