<!--
Component: Context Building Tutorial - Advanced Filtering
Block-UUID: 3c4d5e6f-7a8b-9c0d-e1f2-a3b4c5d6e7f0
Parent-UUID: N/A
Version: 1.0.0
Description: Guides the user through advanced filtering and insights in the Context Builder.
Language: Markdown
Created-at: 2025-07-29T19:20:18.844Z
Authors: Gemini 2.5 Flash Thinking (v1.0.0)
-->


> GitSense Chat Help: Tutorials / Mastering Context / Advanced Filtering

## Part 4 - Advanced Filtering and Insights in the Context Builder

You've learned how to quickly load context, create bundles with the LLM, and merge multiple sources. Now, let's explore the true power of the Context Builder: its advanced filtering capabilities. These features allow you to precisely curate your LLM's knowledge base, ensuring it only sees the most relevant information for any given task.

---

### Step 1: Open the Context Builder

To access the advanced filtering options, you'll need to open the Context Builder modal.

1.  In the **latest 'Context' message** in your chat (the one containing all files from both 'Hello World' and 'Hey World' repos), click the **'Review, load and add' link**.

The Context Builder modal will appear, pre-populated with all the files from your consolidated context.

### Step 2: Filter by Search

You can refine the context by searching for specific terms within the file content.

1.  Locate the **"Search and filter by file content"** input field at the top of the Context Builder modal.
2.  Type `calculateSum` into the search field.

You'll notice that the table below dynamically updates to show only the files that contain the term "calculateSum."

3.  To select only these matched files, click the **checkbox in the table header**. This will select all files that matched your search.

To show all the files again, just clear the search input.

### Step 3: Filter by Metadata and Use Insights

This is where your custom Analyzers truly shine! You can filter files based on the structured metadata extracted by your Analyzers.

1.  Find the **"Metadata Filter & Insights"** section.
2.  Click the **'Analyzer' dropdown** and select your custom Analyzer: `tutorial-code-comment-analyzer-{{short-id-0}}::file-content::default`.
3.  Click the **'+Add Metadata Filter Rule'** button.
4.  In the new rule row that appears:
    *   From the **first dropdown**, select `has_spelling_mistakes`.
    *   From the **second dropdown**, select `is`.
    *   In the **value input field**, select `True`.

The table will now filter to show only files that your Analyzer has flagged as having spelling mistakes.

#### Pro Tip

To the right of the input field for each Metadata Filter Rule, you will find a `Fetch Values` link. Click the link to turn the input field into a dropdown menu with all available options.

> **Understanding Metadata Filter Logic:**
> *   If you add multiple rules for the *same* metadata field (e.g., `language is JavaScript` AND `language is Python`), these are ttreated as an **'OR'** condition (files matching either rule).
> *   If you add rules for *different* metadata fields (e.g., `has_spelling_mistakes is True` AND `outdated_comment_detected is True`), these are treated as an **'AND'** condition (files must match all rules).

#### Using the 'Insights' Button

The 'Insights' button provides a powerful way to understand the distribution of your metadata and quickly build complex filter rules.

1.  Click the **'Insights' button** (located next to the 'Analyzer' dropdown).
    *   A new modal will appear, listing all distinct values for the metadata fields extracted by your selected Analyzer, along with the count of files that possess each value. This gives you a statistical overview of your data.
2.  In the 'Insights' modal, select the checkboxes for both `has_spelling_mistakes` and `outdated_comment_detected`.
3.  Click the **'Replace Filter Rules with Selected' button** at the bottom of the 'Insights' modal, which will close the modal.
4.  Now click 'Apply Filter' to apply the selected rules.

This demonstrates how the 'Insights' feature can not only provide valuable data overviews but also help you construct sophisticated filters with ease.

> **Future Plans:** On the roadmap is the ability to save metadata filter rules, which will make gathering insights and constructing contexts that much more useful.

### Step 4: Other Filtering Options (Briefly)

While we won't go into detail for every filter, it's worth noting that the Context Builder also allows you to filter by:

*   **Path:** Enter text patterns to filter files. Path filters are case insensitive and are wildcard (*) implicit.
*   **Language:** Filter by programming language (e.g., `Python`, `JavaScript`).
*   **Keywords:** Filter based on keywords extracted from the content (most effective when content has been pre-analyzed for keywords).

You can combine any of these filters to create highly specific contexts for your LLM.

---

**Next Step:** You've now mastered the core aspects of context building and refinement in GitSense Chat. Now let's move on to understand how messages can be copied for use in other applications. Click the button below to start the next part.

[add-next-part]({{5. Extracting Value: Using the Messages Tool}})
