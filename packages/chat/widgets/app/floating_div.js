/*
 * GitSense Chat - Minified Distribution File
 *
 * This JavaScript file is part of the minified distribution of GitSense Chat.
 * It has been optimized (minified) for performance and efficient delivery.
 *
 * This software is permitted for internal use and modification.
 * Copying for profit or redistribution is strictly not permitted.
 *
 * The Fair License, which formalizes these terms, will be adopted as the official license in the future.
 * Once finalized, the unminified source code will be freely available for internal use for non-
 * commercial purposes.
 *
 * This software may not be used to develop or enhance any product or service that competes
 * directly or indirectly with GitSense Chat without explicit permission.
 *
 * Copyright (c) 2025 GitSense. All rights reserved.
 */

let aiModelSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white" width="16" height="16" transform="translate(1, 0)"><path d="M10.628 7.25a2.25 2.25 0 1 1 0 1.5H8.622a2.25 2.25 0 0 1-2.513 1.466L5.03 12.124a2.25 2.25 0 1 1-1.262-.814l1.035-1.832A2.245 2.245 0 0 1 4.25 8c0-.566.209-1.082.553-1.478L3.768 4.69a2.25 2.25 0 1 1 1.262-.814l1.079 1.908A2.25 2.25 0 0 1 8.622 7.25ZM2.5 2.5a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm4 4.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm6.25 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-9.5 5.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"></path></svg>',xSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M5.72 5.72a.75.75 0 0 1 1.06 0L12 10.94l5.22-5.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L13.06 12l5.22 5.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L12 13.06l-5.22 5.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L10.94 12 5.72 6.78a.75.75 0 0 1 0-1.06Z"></path></svg>',dashSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M4.5 12.75a.75.75 0 0 1 .75-.75h13.5a.75.75 0 0 1 0 1.5H5.25a.75.75 0 0 1-.75-.75Z"></path></svg>',chevronSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg>',FloatingDiv=(()=>{let e={width:400,height:300,minWidth:300,maxWidth:800,position:{bottom:0},storageKey:"floatingDivState",style:{background:"#ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"10px 10px 20px 30px"},toggleButton:{size:40,position:"relative",top:"-30px",background:"#007bff",hoverBackground:"#0056b3",color:"#ffffff",expandIcon:aiModelSvg,collapseIcon:aiModelSvg},minimizeButton:{symbol:dashSvg}};function l(t,e){Object.assign(t.style,e)}function o(t){return t&&"object"==typeof t&&!Array.isArray(t)}function t(t={}){this.settings=function e(i,n){let s=Object.assign({},i);return o(i)&&o(n)&&Object.keys(n).forEach(t=>{o(n[t])&&t in i?s[t]=e(i[t],n[t]):Object.assign(s,{[t]:n[t]})}),s}(e,t),this.elements=null,this.isExpanded=!0,this.isResizing=!1,this.startX=0,this.startWidth=0,this.rafId=null}return t.prototype.init=function(){return this.elements=(t=>{var{width:e,height:i,position:n}=t,e="number"==typeof e?e+"px":e,i="number"==typeof i?i+"px":i,{left:n,right:s}=n,n="number"==typeof n?n+"px":n,s="number"==typeof s?s+"px":s,{borderLeft:o,borderRight:a}=t.style,d=document.createElement("div"),e=(d.className="floating-div-container",{width:e,height:i,bottom:t.position.bottom+"px",background:t.style.background,borderLeft:t.style.borderLeft});return void 0!==n?e.left=n:void 0!==s&&(e.right=s),void 0!==o&&(e.borderLeft=o),void 0!==a&&(e.borderRight=a),l(d,e),(i=document.createElement("div")).className="floating-div-resize-handle",void 0!==n&&(i.style.right=0),void 0!==s&&(i.style.left=0),(o=document.createElement("div")).className="floating-div-minimize",o.innerHTML=t.minimizeButton.symbol,void 0!==t.minimizeButton.right&&(o.style.right=t.minimizeButton.right),(a=document.createElement("div")).className="floating-div-content",l(a,{padding:t.style.padding,scrollbarWidth:"none"}),(e=document.createElement("button")).className="floating-div-toggle",l(e,{width:t.toggleButton.size+"px",height:t.toggleButton.size+"px",background:t.toggleButton.background,color:t.toggleButton.color,position:t.toggleButton.position,top:t.toggleButton.top}),d.appendChild(o),d.appendChild(a),d.appendChild(e),d.appendChild(i),{container:d,resizeHandle:i,minimizeButton:o,toggleButton:e,content:a}})(this.settings),document.body.appendChild(this.elements.container),this.loadState(),this.bindEvents(),this.injectStyles(),this},t.prototype.injectStyles=function(){var t="floating-div-dynamic-styles";let e=document.getElementById(t);e||((e=document.createElement("style")).id=t,document.head.appendChild(e));t=this.settings.toggleButton;e.textContent=`
            .floating-div-toggle:hover {
                background: ${t.hoverBackground} !important;
            }
            
            .floating-div-container.collapsed {
                width: ${t.size}px !important;
                height: ${t.size}px !important;
            }
        `},t.prototype.bindEvents=function(){this.elements.toggleButton.addEventListener("click",()=>this.toggle()),this.elements.minimizeButton.addEventListener("click",()=>this.toggle());var t=this.elements.resizeHandle;let n=void 0===this.settings.position.right;t.addEventListener("mousedown",t=>{this.isResizing=!0,this.startX=t.clientX,this.startWidth=this.elements.container.offsetWidth,document.body.style.cursor="ew-resize",document.body.style.userSelect="none";let e=e=>{this.isResizing&&(this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{var t=n?e.clientX-this.startX:this.startX-e.clientX,t=this.startWidth+t,t=Math.min(Math.max(t,this.settings.minWidth),this.settings.maxWidth);this.elements.container.style.width=t+"px"}))},i=()=>{this.isResizing&&(this.isResizing=!1,document.body.style.cursor="",document.body.style.userSelect="",this.rafId&&cancelAnimationFrame(this.rafId),this.saveState(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)})},t.prototype.setContent=function(t){return this.elements.content.innerHTML=t,this},t.prototype.toggle=function(){return this.isExpanded=!this.isExpanded,this.elements.container.classList.toggle("collapsed"),this.elements.toggleButton.innerHTML=this.isExpanded?this.settings.toggleButton.expandIcon:this.settings.toggleButton.collapseIcon,setTimeout(()=>{this.saveState()},1e3),this},t.prototype.saveState=function(){var t={isExpanded:this.isExpanded};localStorage.setItem(this.settings.storageKey,JSON.stringify(t))},t.prototype.loadState=function(){var t,e,i=localStorage.getItem(this.settings.storageKey);i&&({width:e,height:t}=i=JSON.parse(i),e="number"==typeof e?e+"px":e,this.isExpanded=i.isExpanded,e&&(this.elements.container.style.width=e),i.isExpanded||(this.elements.container.classList.add("collapsed"),this.elements.toggleButton.innerHTML=this.settings.toggleButton.collapseIcon))},t.prototype.destroy=function(){this.elements&&(document.body.removeChild(this.elements.container),this.elements=null)},t})();module.exports=FloatingDiv;
